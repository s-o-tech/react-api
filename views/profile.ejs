<!DOCTYPE html>
<html>
<%- include('./header'); %>
<body>
<div class="row">
  <div class="col-md-4">
    <h1 class="center"><%= userName %></h1>
    <a class="nav-link" href="/users/<%=targetUserId%>/following"><%= totalFollowing %> following</a>
    <a class="nav-link" href="/users/<%=targetUserId%>/followers"><%= totalFollowers %> followers</a>
  </div>
  <div class="col-md-8">
    <% if (userId !== targetUserId) { %>
      <% if (!followed) { %>
        <form action="/profile" method="post">
          <input type="hidden" name="follow" value=<%= targetUserId %>>
          <button class="btn btn-sm btn-primary" type="submit">Follow</button>
        </form>
      <% } else { %>
        <form action="/profile" method="post">
          <input type="hidden" name="unFollow" value=<%= targetUserId %>>
          <button class="btn btn-sm btn-primary" type="submit">UnFollow</button>
        </form>
      <% } %>
    <% } %>
    <ul>
      <h2>Microposts (<%= total %>) </h2>
      <% for(let micropost of microposts){ %>
        <hr>
        <%= micropost.content %>
        <% if (userId == targetUserId) { %>
          <form action="/" method="post">
            <input type="hidden" name="postId" value=<%= micropost.id %>>
            <button class="btn btn-sm btn-primary" type="submit">delete</button>
          </form>
        <% } %>
      <% } %>
    </ul>
    <nav aria-label="Page navigation example">
      <ul class="pagination">
        <% if (pagination.currentPage != 1){ %>
          <li class="page-item">
            <a class="page-link" href="?page=<%= pagination.currentPage - 1 %>" aria-label="Previous">
              Previous
            </a>
          </li>
        <% } else { %>
          <li class="page-item disabled">
            <a class="page-link" aria-label="Previous">
              Previous
            </a>
          </li>
        <% } %>

        <% for (let i = pagination.currentPage - 2;i <= pagination.currentPage + 2 && i <= pagination.lastPage; i++){ %>
          <% if (i < 1) continue; %>
          <% if ( i == pagination.currentPage){ %>
            <li class="page-item active"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
          <% } else { %>
            <li class="page-item"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
          <% } %>
        <% } %>

        <% if (pagination.currentPage != pagination.lastPage){ %>
          <li class="page-item">
            <a class="page-link" href="?page=<%= pagination.currentPage + 1 %>" aria-label="Next">
              Next
            </a>
          </li>
        <% } else { %>
          <li class="page-item disabled">
            <a class="page-link" aria-label="Next">
              Next
            </a>
          </li>
        <% } %>
      </ul>
    </nav>
  </div>
</div>


</body>

<footer>
  <%- include('./footer'); %>
  <link href="/stylesheets/style.css" rel="stylesheet">
</footer>
</html>